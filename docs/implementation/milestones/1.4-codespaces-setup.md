# Milestone 1.4: Development Environment Setup

**Goal**: Configure GitHub Codespaces for consistent cloud development  
**Status**: ðŸ“‹ Planned  
**Dependencies**: Milestone 1.1 complete (monorepo structure established)  
**Reference**: `/docs/specs/devops-environment-analysis.md`

## Milestone Overview

Set up GitHub Codespaces as the primary development environment for StudyPuck:
- Create `.devcontainer/` configuration
- Configure development tools and extensions
- Set up environment variables and secrets
- Test full development workflow in Codespaces
- Document local development as fallback option

## Prerequisites

- [ ] Milestone 1.1 complete (monorepo + SvelteKit app working)
- [ ] studypuck.app loading successfully
- [ ] Local development working (as reference)

## Implementation Tasks

### Task 1: Create Devcontainer Configuration

1. **Create `.devcontainer/devcontainer.json`**
   ```json
   {
     "name": "StudyPuck Development",
     "image": "mcr.microsoft.com/devcontainers/javascript-node:20",
     "features": {
       "ghcr.io/devcontainers/features/github-cli:1": {}
     },
     "customizations": {
       "vscode": {
         "extensions": [
           "svelte.svelte-vscode",
           "bradlc.vscode-tailwindcss",
           "ms-playwright.playwright",
           "unifiedjs.vscode-mdx"
         ],
         "settings": {
           "typescript.preferences.importModuleSpecifier": "relative"
         }
       }
     },
     "postCreateCommand": "pnpm install",
     "forwardPorts": [5173, 4173],
     "portsAttributes": {
       "5173": {
         "label": "Development Server"
       }
     }
   }
   ```

2. **Configure development scripts**
   - Add Codespaces-specific npm scripts
   - Configure port forwarding for SvelteKit dev server

### Task 2: Environment Variables Setup

1. **Codespaces secrets**
   - Configure development environment variables
   - Set up Auth0 development credentials (Milestone 1.2)
   - Configure local D1 database access (Milestone 1.3)

2. **Development workflow**
   - Document Codespaces launch process
   - Test full development cycle in cloud environment

### Task 3: Developer Experience

1. **VS Code configuration**
   - Svelte language support
   - TypeScript configuration
   - Playwright test runner integration
   - Git integration setup

2. **Development tools**
   - Configure PNPM in container
   - Set up Turborepo caching
   - Wrangler CLI for Cloudflare development

### Task 4: Documentation

1. **Development setup guide**
   - How to launch Codespace
   - Development workflow in cloud environment
   - Local development as fallback option

2. **Troubleshooting guide**
   - Common Codespaces issues
   - Performance optimization tips
   - Local development switching

## Success Criteria

- [ ] **Codespace launches** with all development tools configured
- [ ] **SvelteKit dev server** runs and is accessible via forwarded port
- [ ] **All VS Code extensions** working (Svelte, TypeScript, etc.)
- [ ] **PNPM and Turborepo** working in container environment
- [ ] **Git workflow** functions normally in Codespace
- [ ] **Development cycle** (edit â†’ build â†’ test) working end-to-end

## Verification Steps

1. **Launch Codespace**
   - From GitHub repository â†’ Code â†’ Codespaces â†’ Create
   - Wait for container to build and configure

2. **Test Development Workflow**
   ```bash
   # Should work in Codespace
   pnpm turbo dev --filter=web
   # Access forwarded port, verify app loads
   ```

3. **Verify Extensions**
   - Svelte syntax highlighting working
   - TypeScript error checking active
   - Git integration functional

## Files Created/Modified

- `.devcontainer/devcontainer.json` - Codespaces configuration
- `.devcontainer/Dockerfile` - Custom container (if needed)
- `docs/implementation/setup/codespaces-setup.md` - Usage guide
- `README.md` - Updated with Codespaces development instructions

## Benefits

- **Consistent environment**: Same setup for all developers
- **No local setup**: Works on any device with browser
- **Resource efficiency**: Use GitHub's cloud resources for builds
- **Collaboration ready**: Easy for future contributors

## Next Steps

Upon completion: Development environment standardized and documented

**Future Milestones**: Continue with core features (Milestone 2.1: Card Management)